# quickstart-sidecar-linux

This repo provides a script that help install the Cyral Sidecar via linux packages.

Please review the [related Cyral documentation](https://cyral.com/docs/sidecars/linux/install)
for more detailed directions.

> **NOTE:** This script assumes that you have superuser privileges on the target machine.

---

## Prerequisites

When you ran the sidecar Generate function in the Cyral control plane UI, it provided a set
of export commands to set parameters needed by this script. If you have not set these parameters
in your environment, set them now:

    CYRAL_CONTROL_PLANE: This is the host where your Cyral control plane runs. 
    For example, if your control plane UI runs at https://example.cyral.com/app/home then your hostname is example.cyral.com.

    CYRAL_SIDECAR_ID: Unique identifier for the sidecar. 
    This was generated by Cyral when you created the sidecar in the Cyral control plane UI.

    CYRAL_SIDECAR_CLIENT_ID: Generated by Cyral when you created the sidecar in the Cyral control plane UI.

    CYRAL_SIDECAR_CLIENT_SECRET: Shared secret used to secure control plane-sidecar communication. 
    Generated by Cyral when you created the sidecar in the Cyral control plane UI.

    CYRAL_SIDECAR_VERSION: Sidecar binary version to be deployed, for instance: v2.32.2

> **IMPORTANT:** You must run the export commands as **superuser**!

On some OS, you may need to install [curl](https://curl.se/download.html) and [jq](https://stedolan.github.io/jq/download/) too.

A minimum Control Plane version of `v2.34.0` is required for this script.

---

## Usage

```bash
bash install-linux.sh
```

If you have already downloaded the binaries and do not want to download them again, use the `--local_package` argument to provide the location of the downloaded binaries, as shown below:

```bash
bash install-linux.sh --local_package=<binary_path>
```

> **IMPORTANT:** You must run the script as **superuser**!

---

## Arguments

**--local_package**: specify path to an already-downloaded Cyral sidecar RPM/DEB package, and prevent the script from downloading a new one.

---

## Examples

### Installation on RedHat/CentOS after executing commands

```bash
bash install-linux.sh
```

### Installation on Debian/Ubuntu using a binary that was already downloaded

```bash
bash install-linux.sh --local_package=/tmp/cyral-sidecar-v2.26.1.deb
```
